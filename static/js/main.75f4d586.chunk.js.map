{"version":3,"sources":["components/reducer.jsx","services/aviasalesApi.jsx","components/actions.jsx","components/Ticket.jsx","components/Empty.jsx","components/Error.jsx","components/TicketList.jsx","components/Filter.jsx","components/SortButtons.jsx","components/Progress.jsx","components/App.jsx","index.jsx"],"names":["reducerFilters","filter","checkedList","checkAll","action","type","list","checked","reducerSort","state","sort","reducerData","data","tickets","reducerLoading","loading","isLoading","reducerProgress","progress","reducerError","error","reducer","getSearchId","a","fetch","response","json","getData","id","searchId","ok","stop","setLoading","setProgress","setError","setData","dispatch","maxCalls","i","sortCheapest","sortFastest","setCheckedList","setCheckedAll","Flight","direction","origin","destination","date","stops","duration","durationTime","format","asString","Date","dateStart","dateEnd","addSubtractDate","add","stopsList","join","stopsCountLabel","length","getStopsCountLabel","className","Ticket","item","price","carrier","segments","to","back","priceLabel","toString","replace","src","alt","Empty","Error","TicketList","index","map","key","uniqid","connect","defaultProps","CheckboxGroup","Checkbox","Group","allFilters","defaultFilters","stateFilter","bindActionCreators","actions","useEffect","onChange","event","isChecked","target","options","value","checkList","stateSort","onClick","style","position","top","left","maxWidth","lineHeight","zIndex","percent","showInfo","strokeColor","func","filters","checkboxNumber","includes","ticket","withFilters","without","one","two","three","filteredData","sortedData","prev","next","skeleton","Progress","spinning","size","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.75f4d586.chunk.js","sourcesContent":["const reducerFilters = (\r\n  filter = {\r\n    checkedList: [],\r\n    checkAll: true,\r\n  },\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case 'SET__CHECKED__LIST':\r\n      return { ...filter, checkedList: action.list };\r\n    case 'SET__CHECKED__ALL':\r\n      return { ...filter, checkAll: action.checked };\r\n    default:\r\n      return filter;\r\n  }\r\n};\r\n\r\nconst reducerSort = (\r\n  state = {\r\n    sort: 'cheapest',\r\n  },\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case 'SORT__CHEAPEST':\r\n      return { ...state, sort: 'cheapest' };\r\n\r\n    case 'SORT__FASTEST':\r\n      return { ...state, sort: 'fastest' };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst reducerData = (data = [], action) => {\r\n  switch (action.type) {\r\n    case 'SET__DATA':\r\n      return [...data, ...action.tickets];\r\n\r\n    default:\r\n      return data;\r\n  }\r\n};\r\n\r\nconst reducerLoading = (loading = true, action) => {\r\n  switch (action.type) {\r\n    case 'SET__LOADING':\r\n      return action.isLoading;\r\n\r\n    default:\r\n      return loading;\r\n  }\r\n};\r\nconst reducerProgress = (progress = 0, action) => {\r\n  switch (action.type) {\r\n    case 'SET__PROGRESS':\r\n      return action.progress;\r\n\r\n    default:\r\n      return progress;\r\n  }\r\n};\r\nconst reducerError = (error = null, action) => {\r\n  switch (action.type) {\r\n    case 'SET__ERROR':\r\n      return action.error;\r\n\r\n    default:\r\n      return error;\r\n  }\r\n};\r\n\r\nconst reducer = (state = {}, action) => {\r\n  return {\r\n    isLoading: reducerLoading(state.isLoading, action),\r\n    progress: reducerProgress(state.progress, action),\r\n    error: reducerError(state.error, action),\r\n    data: reducerData(state.data, action),\r\n    sort: reducerSort(state.sort, action),\r\n    filter: reducerFilters(state.filter, action),\r\n  };\r\n};\r\n\r\nexport default reducer;\r\n","export const getSearchId = async () => {\r\n  const response = await fetch('https://front-test.beta.aviasales.ru/search');\r\n  return response.json();\r\n};\r\n\r\nexport const getData = async (id) => {\r\n  const response = await fetch(`https://front-test.beta.aviasales.ru/tickets?searchId=${id.searchId}`);\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  const { tickets, stop } = await response.json();\r\n  if (stop) {\r\n    return false;\r\n  }\r\n  return tickets;\r\n};\r\n","import { getSearchId, getData } from '../services/aviasalesApi';\r\n\r\nexport const setLoading = (isLoading) => ({ type: 'SET__LOADING', isLoading });\r\nexport const setProgress = (progress) => ({ type: 'SET__PROGRESS', progress });\r\nexport const setError = (error) => ({ type: 'SET__ERROR', error });\r\n\r\nexport const setData = () => async (dispatch) => {\r\n  dispatch(setLoading(true));\r\n  let id;\r\n  try {\r\n    id = await getSearchId();\r\n  } catch (err) {\r\n    dispatch(setError(err));\r\n    dispatch(setProgress(100));\r\n    dispatch(setLoading(false));\r\n    return;\r\n  }\r\n  const maxCalls = 30;\r\n  for (let i = 1; i <= maxCalls; i++) {\r\n    try {\r\n      // eslint-disable-next-line\r\n      const tickets = await getData(id);\r\n      if (tickets === false) {\r\n        dispatch(setProgress(100));\r\n        break;\r\n      }\r\n      dispatch({ type: 'SET__DATA', tickets });\r\n      dispatch(setProgress((i * 100) / maxCalls));\r\n    } catch (err) {\r\n      dispatch(setError(err));\r\n    } finally {\r\n      dispatch(setLoading(false));\r\n    }\r\n  }\r\n};\r\n\r\nexport const sortCheapest = () => ({ type: 'SORT__CHEAPEST' });\r\n\r\nexport const sortFastest = () => ({ type: 'SORT__FASTEST' });\r\n\r\nexport const setCheckedList = (list) => ({ type: 'SET__CHECKED__LIST', list });\r\n\r\nexport const setCheckedAll = (checked) => ({ type: 'SET__CHECKED__ALL', checked });\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport format from 'date-format';\r\nimport addSubtractDate from 'add-subtract-date';\r\n\r\nconst getStopsCountLabel = ({ length }) => {\r\n  if (length === 0) {\r\n    return 'без пересадок';\r\n  }\r\n  if (length === 1) {\r\n    return '1 пересадка';\r\n  }\r\n  return `${length} пересадки`;\r\n};\r\n\r\nconst getPriceLabel = (cost) => {\r\n  return `${cost.toString().replace(/(\\d)(?=(\\d{3})+$)/g, '$1 ')} Р`;\r\n};\r\n\r\nconst Flight = ({ direction }) => {\r\n  const { origin, destination, date, stops, duration } = direction;\r\n  const durationTime = format.asString('hhч mmм', new Date(0, 0, 1, 0, duration));\r\n  const dateStart = format.asString('hh:mm', new Date(date));\r\n  const dateEnd = format.asString('hh:mm', addSubtractDate.add(new Date(date), duration, 'minutes'));\r\n  const stopsList = stops.join(', ');\r\n  const stopsCountLabel = getStopsCountLabel(stops);\r\n\r\n  return (\r\n    <div className=\"ticket__flight\">\r\n      <div className=\"ticket__info\">\r\n        <p className=\"font--grey-title\">{`${origin} - ${destination}`}</p>\r\n        <p>{`${dateStart} – ${dateEnd}`}</p>\r\n      </div>\r\n      <div className=\"ticket__info\">\r\n        <p className=\"font--grey-title\">В пути</p>\r\n        <p>{durationTime}</p>\r\n      </div>\r\n      <div className=\"ticket__info\">\r\n        <p className=\"font--grey-title\">{stopsCountLabel}</p>\r\n        <p>{stopsList}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default function Ticket({ item }) {\r\n  const { price, carrier, segments } = item;\r\n  const [to, back] = segments;\r\n\r\n  const priceLabel = getPriceLabel(price);\r\n  const baseUrlImage = '//pics.avs.io/99/36/';\r\n\r\n  return (\r\n    <div className=\"ticket\">\r\n      <div className=\"ticket__header\">\r\n        <h4 className=\"ticket__title font--blue\">{priceLabel}</h4>\r\n        <div className=\"ticket__logo\">\r\n          <img src={`${baseUrlImage}${carrier}.png`} alt={`logo ${carrier}`} className=\"src\" />\r\n        </div>\r\n      </div>\r\n      <Flight direction={to} />\r\n      <Flight direction={back} />\r\n    </div>\r\n  );\r\n}\r\n\r\nTicket.propTypes = {\r\n  item: PropTypes.shape({\r\n    price: PropTypes.number.isRequired,\r\n    carrier: PropTypes.string.isRequired,\r\n    segments: PropTypes.arrayOf(PropTypes.object),\r\n  }).isRequired,\r\n};\r\nFlight.propTypes = {\r\n  direction: PropTypes.shape({\r\n    origin: PropTypes.string,\r\n    destination: PropTypes.string,\r\n    date: PropTypes.string,\r\n    stops: PropTypes.arrayOf(PropTypes.string),\r\n    duration: PropTypes.number,\r\n  }).isRequired,\r\n};\r\n","import React from 'react';\r\n\r\nexport default function Empty() {\r\n  return <div className=\"alert alert--empty\">Рейсов, подходящих под заданные фильтры, не найдено</div>;\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Error() {\r\n  return <div className=\"alert alert--error\">Oshibka</div>;\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport uniqid from 'uniqid';\r\nimport Ticket from './Ticket';\r\nimport Empty from './Empty';\r\nimport Error from './Error';\r\n\r\nconst TicketList = ({ error, data }) => {\r\n  if (error) {\r\n    return <Error />;\r\n  }\r\n  if (data.length === 0) {\r\n    return <Empty />;\r\n  }\r\n  return data\r\n    .filter((item, index) => index < 5)\r\n    .map((item) => {\r\n      return (\r\n        <li key={uniqid()}>\r\n          <Ticket item={item} />\r\n        </li>\r\n      );\r\n    });\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    error: state.error,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(TicketList);\r\n\r\nTicketList.defaultProps = {\r\n  error: null,\r\n};\r\n\r\nTicketList.propTypes = {\r\n  data: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  error: PropTypes.instanceOf(Error),\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport { Checkbox } from 'antd';\r\nimport * as actions from './actions';\r\n\r\nconst CheckboxGroup = Checkbox.Group;\r\nconst allFilters = ['Без пересадок', '1 пересадка', '2 пересадки', '3 пересадки'];\r\nconst defaultFilters = ['Без пересадок', '1 пересадка', '2 пересадки', '3 пересадки'];\r\n\r\nfunction Filter({ stateFilter, setCheckedList, setCheckedAll }) {\r\n  const { checkedList, checkAll } = stateFilter;\r\n\r\n  useEffect(() => {\r\n    setCheckedList(defaultFilters);\r\n  }, [setCheckedList]);\r\n\r\n  const onChange = (checkList) => {\r\n    setCheckedAll(checkList.length === allFilters.length);\r\n    setCheckedList(checkList);\r\n  };\r\n\r\n  const onCheckAllChange = (event) => {\r\n    const isChecked = event.target.checked;\r\n    setCheckedAll(isChecked);\r\n    setCheckedList(isChecked ? allFilters : []);\r\n  };\r\n\r\n  return (\r\n    <aside className=\"sidebar\">\r\n      <h4 className=\"sidebar__header\">Количество пересадок</h4>\r\n      <Checkbox className=\"sidebar__Checkbox-all\" onChange={onCheckAllChange} checked={checkAll}>\r\n        Все\r\n      </Checkbox>\r\n      <CheckboxGroup className=\"sidebar__CheckboxGroup\" options={allFilters} value={checkedList} onChange={onChange} />\r\n    </aside>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    stateFilter: state.filter,\r\n  };\r\n};\r\nconst mapDispatchToProps = (dispatch) => {\r\n  const { setCheckedList, setCheckedAll } = bindActionCreators(actions, dispatch);\r\n  return {\r\n    setCheckedList,\r\n    setCheckedAll,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Filter);\r\n\r\nFilter.propTypes = {\r\n  stateFilter: PropTypes.shape({\r\n    checkedList: PropTypes.arrayOf(PropTypes.string),\r\n    checkAll: PropTypes.bool,\r\n  }).isRequired,\r\n  setCheckedList: PropTypes.func.isRequired,\r\n  setCheckedAll: PropTypes.func.isRequired,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport * as actions from './actions';\r\n\r\nfunction SortButtons({ stateSort, sortCheapest, sortFastest }) {\r\n  const { sort } = stateSort;\r\n  return (\r\n    <div className=\"sort\">\r\n      <button\r\n        type=\"button\"\r\n        className={`sort__btn btn-cheapest${sort === 'cheapest' ? ' sort__btn--active' : ''}`}\r\n        onClick={sortCheapest}\r\n      >\r\n        Самый дешевый\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        className={`sort__btn btn-fastest${sort === 'fastest' ? ' sort__btn--active' : ''}`}\r\n        onClick={sortFastest}\r\n      >\r\n        Самый быстрый\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    stateSort: state.sort,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  const { sortCheapest, sortFastest } = bindActionCreators(actions, dispatch);\r\n  return {\r\n    sortCheapest,\r\n    sortFastest,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SortButtons);\r\n\r\nSortButtons.propTypes = {\r\n  stateSort: PropTypes.objectOf(PropTypes.string).isRequired,\r\n  sortCheapest: PropTypes.func.isRequired,\r\n  sortFastest: PropTypes.func.isRequired,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport 'antd/es/progress/style/index.css';\r\nimport { Progress } from 'antd';\r\n\r\nfunction MyProgress({ progress }) {\r\n  const style = {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    maxWidth: '100wv',\r\n    lineHeight: 0,\r\n    zIndex: 1000,\r\n  };\r\n  return (\r\n    <Progress\r\n      style={style}\r\n      percent={progress}\r\n      showInfo={false}\r\n      strokeColor={{\r\n        '0%': '#108ee9',\r\n        '100%': '#87d068',\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    progress: state.progress,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(MyProgress);\r\n\r\nMyProgress.propTypes = {\r\n  progress: PropTypes.number.isRequired,\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './App.scss';\r\nimport 'antd/es/spin/style/index.css';\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport { Spin } from 'antd';\r\nimport * as actions from './actions';\r\nimport TicketList from './TicketList';\r\nimport Filter from './Filter';\r\nimport SortButtons from './SortButtons';\r\nimport Progress from './Progress';\r\n\r\nconst allFilters = ['Без пересадок', '1 пересадка', '2 пересадки', '3 пересадки'];\r\n\r\nconst withFilters = (data, checkedList, filters) => (checkboxNumber) => {\r\n  return !checkedList.includes(filters[checkboxNumber])\r\n    ? []\r\n    : data.filter((ticket) => {\r\n        const stopsCount = ticket.segments[0].stops.length;\r\n        return stopsCount === checkboxNumber;\r\n      });\r\n};\r\n\r\nfunction App({ data, isLoading, filter, setData, stateSort }) {\r\n  const { checkedList } = filter;\r\n  const { sort } = stateSort;\r\n\r\n  const func = withFilters(data, checkedList, allFilters);\r\n\r\n  const without = func(0);\r\n  const one = func(1);\r\n  const two = func(2);\r\n  const three = func(3);\r\n  const filteredData = [...without, ...one, ...two, ...three];\r\n\r\n  const sortedData =\r\n    sort === 'fastest'\r\n      ? filteredData.sort((prev, next) => (prev.segments[0].duration > next.segments[0].duration ? 1 : -1))\r\n      : filteredData.sort((prev, next) => (prev.price > next.price ? 1 : -1));\r\n\r\n  useEffect(() => {\r\n    setData();\r\n  }, [setData]);\r\n\r\n  const skeleton = <div className=\"skeleton\" />;\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Progress />\r\n      <header className=\"header\">\r\n        <div className=\"logo\" />\r\n      </header>\r\n      <main className=\"content\">\r\n        <Filter />\r\n        <section className=\"ticket-list-wrapper\">\r\n          <SortButtons />\r\n          <Spin spinning={isLoading} size=\"large\">\r\n            <ul className=\"ticket-list\">{isLoading ? skeleton : <TicketList data={sortedData} />}</ul>\r\n          </Spin>\r\n        </section>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    searchId: state.searchId,\r\n    isLoading: state.isLoading,\r\n    data: state.data,\r\n    filter: state.filter,\r\n    stateSort: state.sort,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  const { setData } = bindActionCreators(actions, dispatch);\r\n  return {\r\n    setData,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n\r\nApp.propTypes = {\r\n  isLoading: PropTypes.bool.isRequired,\r\n  data: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  filter: PropTypes.shape({\r\n    checkedList: PropTypes.arrayOf(PropTypes.string),\r\n  }).isRequired,\r\n  setData: PropTypes.func.isRequired,\r\n  stateSort: PropTypes.objectOf(PropTypes.string).isRequired,\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport thunk from 'redux-thunk';\r\nimport reducer from './components/reducer';\r\nimport App from './components/App';\r\n\r\nconst myMiddleWare = () => (next) => (action) => {\r\n  const result = next(action);\r\n  // console.log(store.getState());\r\n  return result;\r\n};\r\n\r\nconst store = createStore(reducer, applyMiddleware(myMiddleWare, thunk));\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}